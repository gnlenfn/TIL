# 정규화

최종 편집: 2021년 10월 18일 오후 9:14

## 정규화

- 데이터베이스를 설계하는 방법 중 하나이다. 그리고 정규화는 데이터베이스를 설계한 후 결과물을 검증하기 위해 사용하기도 한다.
- 이상 현상을 제거하면서 데이터베이스를 올바르게 설계하는 과정이 정규화

## 이상 현상의 종류

1. 삽입 이상
    - 새 데이터를 삽입할 때 불필요한 데이터도 함께 삽입해야 하는 문제
    - 새 데이터를 삽입하려는데 자료가 부족해 삽입되지 않는 문제
2. 갱신 이상
    - 중복 투플 중 일부만 변경하여 데이터가 불일치하는 모순의 문제
    - 수정 후 모든 투플이 변경되어야 하는데 아닌 것
3. 삭제 이상
    - 투플을 삭제하면 꼭 필요한 데이터까지 함께 삭제되는 데이터 손실 문제

## 함수 종속

- 하나의 릴레이션을 구성하는 속성의 부분집합을 X, Y라 할 때, X값에 대한 Y값이 항상 하나면 **"X가 Y를 함수적으로 결정한다"** 라고한다.
- 릴레이션에서 스키마는 변하지 않지만 인스턴스는 항상 변할 수 있다. 따라서 함수 종속을 나타낼 때는 현재 릴레이션의 값들을 기준으로 하는 것이 아니라 속성 자체의 특성과 의미를 바탕으로 판단해야 한다.

## 정규화

- 함수 종속성을 이용해 릴레이션을 연관성이 있는 속성들로만 구성되도록 분해하고, 이상 현상이 발생하지 않는 올바른 릴레이션으로 만들어가는 과정을 **정규화** 라고한다.
- 무손실 분해
    - 동등한 의미의 릴레이션들로 분해하고 정보 손실이 없어야한다.
    - 다시 join하면 분해 전으로 복원 가능해야 한다.
    

## 정규화의 종류

### 제1 정규형

- 모든 속성의 도메인이 **원자값**(더이상 분해되지 않는 값)으로만 구성되어 있다

### 제2 정규형

- 릴레이션이 제1 정규형에 속하고, 기본키가 아닌 모든 속성이 기본키에 **완전 함수 종속**된다
- 완전 함수 종속
    - 종속자가 기본키에만 종속된 상태
    - 기본키가 여러개의 속성을 가질 경우, 모든 기본키의 속성이 포함된 집합에 종속되어야 한다.

### 제3 정규형

- 릴레이션이 제2 정규형에 속하고, 기본키가 아닌 모든 속성이 기본키에 **이행적 함수 종속**되지 않는다
- 이행적 함수 종속
    - X, Y, Z 3 개의 속성이 있을 때, `X -> Y` `Y -> Z` 라는 종속 관계가 있다면 `X -> Z`가 성립
    - 이러한 것을 이행적 함수 종속이라고 한다

### Boyce/Codd 정규형

- 릴레이션의 함수 종속 관계에서 모든 결정자가 후보키인 경우
- 제3 정규형을 보완하는 형태
- 후보키가 여러개 있을 경우에만 해당

## 정규화의 장단점

### 장점

1. 데이터베이스 변경 시 이상 현상 제거
2. 정규화된 데이터베이스에서 새로운 데이터 형의 추가가 있다면 구조를 변경하지 않거나 일부만 변경해도 된다. 이로 인해 연동된 응용프로그램에 최소한의 영향만 끼친다
3. 데이터의 중복 속성을 제거하고 동일한 의미의 속성이 하나의 릴레이션으로 집약되어 테이블 데이터 용량이 최소화된다

### 단점

1. 릴레이션 간의 JOIN 연산이 많아진다
    
    —> 쿼리 연산 시간이 느려짐